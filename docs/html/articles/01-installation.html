<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>01 - Installation Guide • fmlr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="01 - Installation Guide">
<meta property="og:description" content="fmlr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fmlr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2-1-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-installation.html">01 - Installation Guide</a>
    </li>
    <li>
      <a href="../articles/02-overview.html">02 - Overview of fmlr</a>
    </li>
    <li>
      <a href="../articles/03-backends.html">03 - Managing Backends</a>
    </li>
    <li>
      <a href="../articles/04-data.html">04 - Data Management</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fml-fam/fmlr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>01 - Installation Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/fml-fam/fmlr/blob/master/docs/vignettes/01-installation.Rmd"><code>docs/vignettes/01-installation.Rmd</code></a></small>
      <div class="hidden name"><code>01-installation.Rmd</code></div>

    </div>

    
    
<style type="text/css">
pre.r {color: white; background-color: #3f3f3f;}

code, pre {background-color: #dee4ea;} /* output bg */
code a {color: #0071db;}
pre a {color: #5daffc;}

.fl      {color: #9090f9;}  /* literal */
.fu      {color: #FF9800;}  /* function */
.ch,.st  {color: #4dc100;}  /* string */
.kw      {color: #FFC107;}  /* keyword */
.co      {color: #9E9E9E;}  /* comment */

.message { color: #EEEEEE;   font-weight: bolder;}
.error   { color: #f44336;  font-weight: bolder;}
.warning { color: #9C27B0; font-weight: bolder;}
</style>
<div id="basics" class="section level2">
<h2 class="hasAnchor">
<a href="#basics" class="anchor"></a>Basics</h2>
<p>Assuming you have the system software dependencies met, then in principle, installation can be as simple as:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"fmlr"</span>, <span class="kw">repos</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://hpcran.org"</span>, <span class="st">"https://cran.rstudio.com"</span>))</pre></body></html></div>
<p>However, before you do, it is strongly advised that you read this document, because there are several important considerations when installing this package.</p>
<p>You may also find the <a href="https://github.com/fml-fam/fmlr/tree/master/containers">container recipes</a> for Docker and Singularity helpful.</p>
</div>
<div id="system-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#system-dependencies" class="anchor"></a>System Dependencies</h2>
<div id="tldr" class="section level4">
<h4 class="hasAnchor">
<a href="#tldr" class="anchor"></a>TLDR</h4>
<ul>
<li>R</li>
<li>Modern C and C++ compilers</li>
<li>Optionally, any of:
<ul>
<li>OpenBLAS (or MKL or whatever)</li>
<li>MPI and ScaLAPACK</li>
<li>CUDA</li>
</ul>
</li>
</ul>
</div>
<div id="long-version" class="section level4">
<h4 class="hasAnchor">
<a href="#long-version" class="anchor"></a>Long version</h4>
<p>First, of course, you will need an <a href="https://cran.r-project.org/">installation of R</a>.</p>
<p>Next, you will need to be able to build R packages from source, since we do not provide any binary packages for fmlr. Generally this requires:</p>
<ul>
<li>Windows: <a href="http://cran.r-project.org/bin/windows/Rtools/">Rtools</a>
</li>
<li>Mac:
<ul>
<li>Install XCode from the Mac App Store</li>
<li>Open XCode and choose “Preferences”, “Downloads”, then “Install Command Line Tools”</li>
</ul>
</li>
<li>Linux/FreeBSD: You need C and C++ compilers, which you may well already have installed. Consult your distribution’s package manager.</li>
</ul>
<p>It is recommended, but not required, that you use a high-performance BLAS library with R. For example, OpenBLAS. There are numerous resources for how to do this on the internet. Unfortunately, they can be somewhat involved for some platforms, so we do not repeat them here.</p>
<p>If you wish to use the MPI backend, you will need to have a system installation of <a href="https://en.wikipedia.org/wiki/Message_Passing_Interface">MPI</a>, e.g. <a href="https://www.open-mpi.org/">OpenMPI</a>, <a href="https://www.mpich.org/">MPICH</a>, or <a href="https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi">MSMPI</a>. We recommend MSMPI for Windows and OpenMPI for everything else:</p>
<ul>
<li>Windows: Install <a href="https://msdn.microsoft.com/en-us/library/bb524831(v=vs.85).aspx">MS-MPI</a>
</li>
<li>Mac: Choose any one of the following
<ul>
<li>Homebrew: <code>brew install open-mpi</code>
</li>
<li>MacPorts: <code>port install openmpi</code>
</li>
<li>You can also <a href="https://www.open-mpi.org/software/ompi/v2.1/">build from source</a>
</li>
</ul>
</li>
<li>Linux/FreeBSD
<ul>
<li>deb (Debian, Ubuntu): <code>apt-get install libopenmpi-dev</code>
</li>
<li>rpm (Fedora, Centos): <code>yum install openmpi-devel</code>
</li>
<li>FreeBSD: <code>pkg install openmpi</code>
</li>
<li>You can also <a href="https://www.open-mpi.org/software/ompi/v2.1/">build from source</a>.</li>
</ul>
</li>
</ul>
<p>If using the MPI backend, you may also wish to have a system installation of <a href="https://netlib.sandia.gov/scalapack/">ScaLAPACK</a>:</p>
<ul>
<li>Windows: <a href="http://icl.cs.utk.edu/lapack-for-windows/scalapack/index.html">ScaLAPACK for Windows</a>
</li>
<li>Mac: Choose any one of the following
<ul>
<li>Homebrew: <code>brew install scalapack</code>
</li>
<li>MacPorts: <code>port install scalapack +openmpi</code>
</li>
<li>You can also <a href="https://netlib.sandia.gov/scalapack/#_software">build from source</a>
</li>
</ul>
</li>
<li>Linux/FreeBSD
<ul>
<li>deb (Debian, Ubuntu): <code>apt-get install libscalapack-openmpi-dev</code>
</li>
<li>rpm (Fedora, Centos): <code>yum install scalapack-openmpi</code>
</li>
<li>FreeBSD: <code>pkg install scalapack</code>
</li>
<li>You can also <a href="https://netlib.sandia.gov/scalapack/#_software">build from source</a>.</li>
</ul>
</li>
</ul>
<p>If you have an appropriate GPU, you can also install <a href="https://developer.nvidia.com/cuda-downloads">NVIDIA® CUDA™</a>.</p>
</div>
</div>
<div id="r-dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#r-dependencies" class="anchor"></a>R Dependencies</h2>
<div id="tldr-1" class="section level4">
<h4 class="hasAnchor">
<a href="#tldr-1" class="anchor"></a>TLDR</h4>
<ul>
<li>R6 (this one shouldn’t give any trouble)</li>
<li>float</li>
<li>Optionally:
<ul>
<li>pbdMPI and pbdSLAP</li>
</ul>
</li>
</ul>
</div>
<div id="long-version-1" class="section level4">
<h4 class="hasAnchor">
<a href="#long-version-1" class="anchor"></a>Long version</h4>
<p>The R package dependencies should install automatically via R’s dependency resolution. However, there are some things that can go wrong.</p>
<p>With float, if you do not have a high-performance BLAS library installed (and you will want one, so if not, go back to the system dependencies section above), then the package will build the reference <code>float</code> (as in floating point) BLAS and LAPACK functions. These are slow, and take a long time to compile. When you build float from source, you can see in the configure log which BLAS/LAPACK library it is using. The <a href="https://cran.r-project.org/web/packages/float/vignettes/float.pdf">float package vignette</a> discusses this somewhat.</p>
<p>If you want to use the MPI backend, you will need to install both of the pbdMPI and pbdSLAP packages. Assuming you installed MPI correctly, the pbdMPI should install fine. If you have any issues, you may find the <a href="https://cran.r-project.org/web/packages/pbdMPI/vignettes/pbdMPI-guide.pdf">pbdMPI package vignette</a> helpful.</p>
<p>For pbdSLAP, you will need a version that contains the <code>float</code> symbols. If you didn’t do a system installation of ScaLAPACK, then you need to run:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"snoweye/pbdSLAP@single"</span>)</pre></body></html></div>
<p>The advantage to this is that it’s easy. The disadvantage is that it takes forever to compile. So if you <em>did</em> create a system installation of ScaLAPACK, then you can do something like this:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"pbdSLAP"</span>, <span class="kw">configure.vars</span><span class="kw">=</span><span class="st">"EXT_LDFLAGS='-lscalapack-openmpi'"</span>)</pre></body></html></div>
<p>where you set the <code>EXT_LDFLAGS</code> appropriately. The example provided is for Ubuntu. Yours may look something like <code>-L/path/to/scalapack -lscalapack</code>. If you can’t figure this out, then use the option above installing from GitHub.</p>
</div>
</div>
<div id="installing-fmlr" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-fmlr" class="anchor"></a>Installing fmlr</h2>
<p>fmlr can be built with or without MPI support, and orthogonally with or without GPU support. Right now, “GPU” exclusively means CUDA.</p>
<p>If you build the package without MPI or GPU support, then the various MPI/GPU functions won’t work (obviously). You can test for backend support in the installed package via:</p>
<ul>
<li>
<code><a href="../reference/features.html">fmlr::fml_cpu()</a></code> - is the CPU backend available? Always returns <code>TRUE</code>.</li>
<li>
<code><a href="../reference/features.html">fmlr::fml_gpu()</a></code> - is the GPU backend available?</li>
<li>
<code><a href="../reference/features.html">fmlr::fml_mpi()</a></code> - is the MPI backend available?</li>
</ul>
<div id="default-installation" class="section level4">
<h4 class="hasAnchor">
<a href="#default-installation" class="anchor"></a>Default Installation</h4>
<p>This will only make the CPU backend available.</p>
<p>Stable releases are published on the <a href="https://hpcran.org">hpcran</a>. You can install them via</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"fmlr"</span>, <span class="kw">repos</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://hpcran.org"</span>, <span class="st">"https://cran.rstudio.com"</span>))</pre></body></html></div>
<p>The development version of fmlr is maintained on GitHub. However, because we use git submodules, you can not use any of the various <code>install_github()</code> functions. You can install the package from the command line via:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="fu">git</span> clone --recurse-submodules https://github.com/fml-fam/fmlr.git</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="ex">R</span> CMD INSTALL fmlr/</a></code></pre></div>
</div>
<div id="gpu-and-mpi-support-mac-linux" class="section level4">
<h4 class="hasAnchor">
<a href="#gpu-and-mpi-support-mac-linux" class="anchor"></a>GPU and MPI Support: Mac, Linux</h4>
<p>You can install the stable version of fmlr with GPU support via:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"fmlr"</span>, <span class="kw">configure.args</span><span class="kw">=</span><span class="st">"--enable-gpu"</span>, <span class="kw">repos</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://hpcran.org"</span>, <span class="st">"https://cran.rstudio.com"</span>))</pre></body></html></div>
<p>To install the development version, you can do something like:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="fu">git</span> clone --recurse-submodules https://github.com/fml-fam/fmlr.git</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="ex">R</span> CMD INSTALL fmlr/ --configure-args=<span class="st">"--enable-gpu"</span></a></code></pre></div>
<p>For MPI, you would do the same as the above, but set the configure args to “–enable-mpi”. For both GPU and MPI support, you would do the same as the above, but set the configure args to “–enable-gpu –enable-mpi”.</p>
</div>
<div id="gpu-and-mpi-support-windows" class="section level4">
<h4 class="hasAnchor">
<a href="#gpu-and-mpi-support-windows" class="anchor"></a>GPU and MPI Support: Windows</h4>
<p><font color="red"><b>Warning:</b></font> I have not successfully tested this, so this may or may not work. If you can help, please <a href="https://github.com/fml-fam/fmlr/issues/2">let me know here</a>.</p>
<p>First, you will need <a href="https://developer.nvidia.com/cuda-downloads">CUDA</a> and the <a href="https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads">Microsoft Visucal C++ compiler</a> since CUDA only supports this compiler on Windows. Then you will need to set <code>CXX14=cl.exe</code> (set the path to <code>cl.exe</code> as necessary) in your <code>~/.R/Makevars.win</code> file.</p>
<p>You will need to download the package source. You can get the stable version of fmlr from <a href="https://hpcran.org/packages/fmlr/index.html">the hpcran</a>.</p>
<p>You can get the development version from GitHub:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">git</span> clone --recurse-submodules https://github.com/fml-fam/fmlr.git</a></code></pre></div>
<p>Once you download the package, you will need to modify the first few lines of the <code>src/Makevars.win</code> file. To enable GPU support, set <code>USE_GPU = "TRUE"</code>, and modify <code>CUDA_DIR</code> as necessary. To enable MPI support, set <code>USE_MPI = "TRUE"</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Drew Schmidt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
